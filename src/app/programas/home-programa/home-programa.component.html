<div class="container-fluid uceva-container">
  <!-- Encabezado estilo UCEVA -->
  <div class="header-section bg-success text-white p-3 mb-4 rounded">
    <div class="d-flex justify-content-between align-items-center">
      <h2 class="mb-0">Programas Académicos</h2>
      <button class="btn btn-light btn-sm" (click)="mostrarFormulario()">
        <fa-icon [icon]="faPlus"></fa-icon> Nuevo Programa
      </button>
    </div>
  </div>

  <div class="row h-100">
    <!-- Sidebar rediseñado -->
    <div class="col-md-4 p-0 sidebar">
      <div class="d-flex flex-column h-100">
        <div class="p-3 bg-light border-bottom">
          <h4 class="mb-0">Programas Registrados</h4>
        </div>

        <div class="list-group list-group-flush" id="listaProgramas">
          <div *ngFor="let programa of programas"
               class="list-group-item list-group-item-action"
               [class.active]="programaSeleccionadoId === programa.id"
               (click)="seleccionarPrograma(programa.id)">

            <div class="d-flex justify-content-between align-items-center">
              <div>
                <h5 class="mb-1">{{ programa.nombre }}</h5>
                <small class="text-muted">Duración: {{ programa.duracion }} semestres</small>
              </div>

              <div class="btn-group btn-group-sm" (click)="$event.stopPropagation()">
                <button class="btn btn-outline-warning" (click)="editarPrograma(programa)">
                  <fa-icon [icon]="faList"></fa-icon>
                </button>
                <button class="btn btn-outline-danger" (click)="eliminarPrograma(programa.id)">
                  <fa-icon [icon]="faTimes"></fa-icon>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Área de contenido -->
    <div class="col-md-8 content-area">
      <!-- Formulario -->
      <div *ngIf="mostrarForm" class="form-container border rounded p-3 mb-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4>{{ programaEditando ? 'Editar' : 'Nuevo' }} Programa</h4>
          <button class="btn btn-sm btn-outline-secondary" (click)="cerrarFormulario()">
            <fa-icon [icon]="faTimes"></fa-icon> Cerrar
          </button>
        </div>
        <app-programas-form
          [programa]="programaEditando || programaNuevo"
          (onSave)="guardarPrograma($event)">
        </app-programas-form>
      </div>

      <!-- Detalle del programa -->
      <div *ngIf="programaSeleccionadoId && !mostrarForm" class="detail-container border rounded p-3">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4>Detalle del Programa</h4>
          <button class="btn btn-sm btn-outline-secondary" (click)="cerrarDetalle()">
            <fa-icon [icon]="faTimes"></fa-icon> Cerrar
          </button>
        </div>
        <app-programa-detalle [programaId]="programaSeleccionadoId"></app-programa-detalle>
      </div>

      <!-- Vista vacía -->
      <div *ngIf="!programaSeleccionadoId && !mostrarForm"
           class="d-flex align-items-center justify-content-center h-100 empty-state">
        <div class="text-center">
          <fa-icon [icon]="faGraduationCap" size="3x" class="text-muted mb-3"></fa-icon>
          <h5 class="text-muted">Seleccione un programa o cree uno nuevo</h5>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer institucional -->
  <footer class="footer-section mt-5 pt-4 border-top">
    <div class="text-center text-muted small">
      <p><strong>Calle 4 No. 10–30. Tuluá, Valle del Cauca</strong></p>
      <p>Tel: (602) 224 2202 | Email: contacto&#64;uceva.edu.co</p>
      <p>© 2025 UCEVA - Todos los derechos reservados</p>
    </div>
  </footer>
</div>
